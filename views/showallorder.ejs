<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Laundry | Home Services</title>
  <link rel="stylesheet" href="../stylesheets/style.css">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
  <div class="main">
    <nav class="navbar">
      <div class="menu-toggle">
        <i class="ri-menu-2-line"></i>
      </div>
      <div class="logo">
        <a href="/">Laundry <span>Portal</span></a>
      </div>
      <ul class="menu">
        <li><a href="/">Home</a></li>
        <li><a href="/about">About</a></li>
        <li><a href="/services">Services</a></li>
        <!-- <li><a href="./order.html">Order</a></li> -->
        <!-- <li><a href="./team.html">Team</a></li> -->
        <li><a href="/contact">Contact</a></li>
        <li><a href="/products">Products</a></li>
      </ul>
      <div class="nav-btn menus" style="display: flex;">
        <% if (isLoggedIn) { %>
          <a href="/order"><button type="submit">Order Now</button></a>
          <a href="/profile"> <div class="pmenu relative"><img class="w-10 h-10 bg-[#f8b500] rounded-full ml-3" src="../images/user.png" alt="profile"></a>
          <div class="profile">
            <div class="pro-left"></div>
          </div>
          <% } else { %>
            <a href="/login"><button type="button">Login</button></a>
            <a href="/signup"><button type="button">SignUp</button></a>
            <% } %>
      </div>
    </nav>
    
    <div class="orderss mt-3 mx-5">
      <span class="font-light">Hello </span><span class="font-semibold"><%= user.fullname %></span>
      <h1 class="text-md">our Orders.</h1>


      <div class="showAllOrders w-full  flex flex-wrap gap-10 mb-12 pl-[15vw]">
        <% user.orders.forEach(function(order){ %>

       
          <a class="w-[40%] " href="/show/<%= order.id %>">
        <div class="oneOrder w-[100%]  roundend-md px-3 py-1 border-[1px] border-solid border-gray-300 overflow-hidden">
          <h1 class="mt-1 w-full text-nowrap">Full Name : <%= order.fullname %></h1>
          <h1 class="mt-1 w-full text-nowrap">Phone Number : +92 <%= order.contact %></h1>
          <h1 class="mt-1 w-full text-nowrap">Address : <%= order.address %></h1>
          <h1 class="mt-1 w-full text-nowrap ">Email : <%= order.email %></h1>
          <!-- <h1 class="mt-1 w-full text-nowrap">Order Date : <%= order.date %></h1> -->
          <h1 class="mt-1 w-full text-nowrap">Order Status : Pending</h1>
          <hr>
          <div class=" w-full">
            
              
              
               <ul type="none" class="w-full flex justify-between">
                <li class="font-semibold">Name</li>
                <li class="font-semibold">QTY</li>
                <li class="font-semibold">Total</li>
               </ul>
                
                <% 
            var itemsPrice = [
              { price: "300", name: "Shalwar" },
              { price: "100", name: "Kameez" },
              { price: "200", name: "T Shirt" },
              { price: "600", name: "Jeans" },
              { price: "300", name: "2-Piece" },
              { price: "350", name: "3-Piece" },
              { price: "50", name: "Hand Towel" }
            ]; 
            var totalPrice = 0;
            var totalPrice = 0;

            // Example: Finding the price of "Jeans"
            var itemName = "Kameez";
            var foundItem = itemsPrice.find(item => item.name === itemName);
          %>
               
              
               <% order.items.forEach(item => { 
                var itemPrice = 0; // Initialize item price
                var itemTotalPrice = 0; // Initialize item total price
                
                // Loop through itemsPrice to find matching item by name
                for (var i = 0; i < itemsPrice.length; i++) {
                  if (itemsPrice[i].name === item.item) {
                    itemPrice = parseFloat(itemsPrice[i].price); // Set item price
                    break; // Exit loop once item is found
                    
                  }
                  %>  <%
                }
                
                
              %>
                   
                
                  <ul type="none" class="w-full flex justify-between">
                    <li class="w-[32%]  "><%= item.item %></li>
                    <li class="w-[32%] text-center "><%= item.quantity %></li>
                    <li class="w-[32%]  text-right"><%= item.totalprice %></li>


                  </ul>
                  <hr>
                 
                
              
                <% }); %>
               
                <div class="total flex justify-between font-bold">
                    <h1>Total</h1>
                    <h1  class="font-bold">$<%=order.grandTotal %></h1>
                    </div>
                
             
          </div>
          
        </div>
        <div class="payAndDeleteBTN flex justify-between w-[32.4vw] font-bold ">
          <form action="/checkout/order/<%= order.id %>" method="post">
              <input class="cursor-pointer" type="submit" value="Payment">
          </form>
        <form action="/delete/order/<%=order.id%>" method="post">
          <input class="cursor-pointer" type="submit" name="" id="" value="Delete Order">
          </form>
          </div>
      </a>
      <% }) %>
    </div>
    
      




    <div class="footer xl:mt-[60vh]" data-scroll>
      <div class="left">
        <div class="line1">
          <a href="">LAUNDRY</a>
          <a href=""> About</a>
          <a href=""> Help Center</a>
          <a href=""> Cancellation option</a>
        </div>
        <div class="line2">
          <a href="">CONNECT WITH US</a>
          <a href="">Facebook</a>
          <a href="">Whatsapp</a>
          <a href="">Instagram</a>
          <a href="">Twitter</a>
        </div>
      </div>
      <div class="right">
        <h2>2024 Laundry</h2>
        <a href="">Terms of Service </a>-<a href=""> Privacy Policy</a>
      </div>
    </div>
  </div>

</body>

</html>